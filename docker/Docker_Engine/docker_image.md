# 도커 이미지

- 컨테이너를 생성하는데 필요한 파일
- `중앙 이미지 저장소(도커 허브)` : 이미지를 업로드/다운로드 할 수 있는 저장소
- `도커 사설 레지스트리` : 도커 허브와 반대로 직접 구축한 이미지 저장소
- `dock search [이미지_이름]`: 해당 이미지를 도커 허브에서 검색합니다.

# 도커 이미지 생성

- 도커 컨테이너 → 도커 이미지 생성

```
// 레포지토리는 docker images 명령어의 이미지 이름입니다.
// 태그 생략시, 최신 버전(latest)을 의미합니다.
# docker commit [옵션] [컨테이너_이름] [레포지토리:태그]
```

| 옵션 | 설명          |
| ---- | ------------- |
| `-a` | 이미지 작성자 |
| `-m` | 커밋 메시지   |

# 도커 이미지 구조

- `docker history [레포지토리:태그]` : 이미지의 레이어 구조를 출력합니다.
- `docker rmi [레포지토리:태그]` : 이미지를 삭제합니다. 단, 해당 이미지로 사용중인 컨테이너가 존재하면 삭제가 불가능합니다. 따라서 컨테이너를 삭제하고 이미지를 삭제해야합니다.

```
# docker stop [컨테이너_이름]
# docker rm [컨테이너_이름]
# docker rmi [레포지토리:태그]
```

- 사용 중인 컨테이너의 이미지를 삭제하는 경우 `댕글리(dangling) 이미지`로 변합니다. 즉, 이미지의 레이어는 유지되고 해당 레이어를 가리키는 이름만 삭제합니다. 레포지토리 이름이 `<none>`이면 `댕글리 이미지`를 의미합니다.
- `docker image prune` : 사용중이지 않은 모든 댕글리 이미지를 삭제합니다.

# 도커 허브 이미지 업로드

- `docker tag [기존_이미지_이름] [새로운_이미지_이름]`: 이미지 이름을 바꿉니다.
- `docker login` : 도커 허브에 접속하며, 로그인 정보는 `/[계정명]/.docker/config.json` 파일에 저장됩니다.
- `docker logout` : 로그인 정보를 삭제합니다.
- `docker push [저장소_이름/이미지_이름]:[태그]` : 도커 허브에 이미지를 업로드합니다.
- `docker pull [저장소_이름/이미지_이름]:[태그]` : 도커 허브에서 이미지를 내려받습니다.
- 도커 이미지 → 도커 컨테이너 생성
